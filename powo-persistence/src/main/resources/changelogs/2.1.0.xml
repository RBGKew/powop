<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

  <changeSet id="2021-08-27_1" author="jds10kg">
    <comment>Add taxon_organisation table. Allows taxa to be linked to multiple organisations.</comment>
    <createTable tableName="taxon_organisation">
      <column name="taxon_id" type="bigint">
        <constraints nullable="false"/>
      </column>
      <column name="organisation_id" type="bigint">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>
  <changeSet id="2021-08-27_2" author="jds10kg">
    <addUniqueConstraint columnNames="taxon_id, organisation_id" constraintName="taxon_organisation_unique_idx" tableName="taxon_organisation"/>
  </changeSet>
  <changeSet id="2021-10-21_1" author="mst10kg">
    <createIndex tableName="resource" indexName="Resource_identifier_IDX" unique="true">
      <column name="identifier" />
    </createIndex>
  </changeSet>
</databaseChangeLog>